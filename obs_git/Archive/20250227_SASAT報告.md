

## 質問まとめ

- 生成直後、model idxはx軸の小さい順？ランダムならそうして欲しい。
  欲を言えばフィット後も、そうできるオプションが欲しい
- バックグラウンドが特殊な場合などで特に顕著だが、関数やパラメータによって動きやすさ(勾配のつきやすさ)に差がある？
- Samplingのアウトプットは最頻値？最適値？

## 要望まとめ

- X軸のオートスケーリング。
- 仕様書やマニュアルをくれ。
- sharley BGを復活してくれ。
- ECMアルゴリズムとかの実装は助かるんだけど、Gaussian+linearとかの原始的なモデルのみでいいので高速フィッティングが可能なモードは残して欲しい。
- 






# 盛り込んでほしい内容
・コアとなる学術的な目的意識
・装置とのインターフェースの話
・データの処理工程の話(どの段階でフィットするのか、戻すのか、どの変数をどんぐらいの粒度でほしいのか)とか

・リアルタイムかどうか
・その上での技術的な問題
・バージョン情報

## 発表内容
EMPeaksの応用事例の紹介と直面している課題
最後にバグ報告


# 連絡事項
1. 共有してほしいもの
	・EMPeaksを用いた分析関連のスライド
	・装置情報
	・どのような実験が想定されるか
	・rawデータ、出力データの構造(フォルダ構成など)
	・実験パラメータについての情報(位置(x, y)・エネルギー(list)・吸光度(list)...)
	・どのような実験手順・データ処理・解析が予想されるか
	・(技術的な)現状の課題、要求
	・今使用中のEMPeaksのバージョン情報(READMEから確認？)
2. 共有先
	BOX: 永村研共有フォルダ/Kentaro Fuku/20250227_SASAT情報共有会
3. 担当者
	・XAFS：福
	・XPS：永村先生
	・Raman：後藤君
	・RHEED：大澤君
	・ARPES：永村先生・矢治さん・竹澤くん


## バグ報告

from Github dev_BG
[emcore.py](http://emcore.py) 67

おそらく、for k~のBsplineのあたりのインデント＋１

**AttributeError**: module 'scipy.integrate' has no attribute 'trapz' scipyのバージョン問題。最新だとscipy.integrate.trapezoidになってるため修正したらOKだった
バージョン情報報告。scipy>=1.14.1
tanhをem_coreの__init__()に追加したい。 他のブランチを確認。
現行のdev_BGにはXAFSはない。

[emcore.py](http://emcore.py) 183 の\==は=では?

        elif self.background == 'b-spline':

            self.K_all == self.K + self.n_spline_basis

            for k in range(self.n_spline_basis):

                self.model.append(SplineBasisModel(self.xmin, self.x_max, self.degree_spline, self.n_section, k))





ちょっとテクニカルだけど
バックグラウンドのみでのフィッティングみたいなことはできるか？
プリ＋エッジ＋ポストだけでXANES領域の自動認識的な。
そのあとエッジ近辺だけ切り出してフィッティング。

# その他

簡易報告from安藤さん
IRはいけそう

だらだら（ゆるいピーク）系はあんまり向いてない
比率だけ予想は全然できそう

任意分布の割合分析・シフト分析できる！？？？めっちゃ使えそう

BSplineを用いた簡易的なローパスフィルタ

変数変換で最小二乗法が安定化することもある


アイデア

MS、NMR、HPLCスペクトルへの適用とかいろいろ夢が広がる

MCDやESRみたいな、スペクトルの引き算や微分の系への展開？

フーリエ変換を噛ませた、振動構造の最尤推定への展開？（EXAFS）



BaseModelをかければOK


モデルを追加したときの初期値設定とかがEMcoreに入っているので、できればEMCoreを触らないように作ってほしい。


高速化、研究テーマとしていくらでもやれそう。
辞書学習 (既知の物理モデルを辞書にする)

スペクトルデータが、確率密度であるというモデルを、物理に基づいてやってるのは日本ぐらい
がっつりやってもいい

ECM系アルゴリズム、時間どうなん？
できれば、高速モードは残して欲しい

高橋さん
深海現場型化学分析装置開発
レーザー分光分析　　海中センシング
レーザー破壊誘起分光法：レーザー加熱でプラズマ化、仕組み的にはICP発光分析->定量化がむずそう
CFーLIBS　プラズマの温度を使って補正
Pみれないのかな
